<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>添加和注册新 Module | HypeR Bot 文档</title>
    <meta name="description" content="适配OneBot v11协议、功能模块化、易于扩展、高效的QQ机器人及框架">
    <meta name="generator" content="VitePress v1.3.1">
    <link rel="preload stylesheet" href="/hyper-bot/assets/style.DG5p8l2U.css" as="style">
    
    <script type="module" src="/hyper-bot/assets/app.g8VgLfsp.js"></script>
    <link rel="preload" href="/hyper-bot/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/hyper-bot/assets/chunks/framework.Di2I1Wv_.js">
    <link rel="modulepreload" href="/hyper-bot/assets/chunks/theme.DAU8yMRk.js">
    <link rel="modulepreload" href="/hyper-bot/assets/usage_dev_new_module.md.BKT3w8F-.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-43d028d2><!--[--><!--]--><!--[--><span tabindex="-1" data-v-95d2ebb9></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-95d2ebb9> Skip to content </a><!--]--><!----><header class="VPNav" data-v-43d028d2 data-v-93dea02d><div class="VPNavBar has-sidebar top" data-v-93dea02d data-v-84f53bce><div class="wrapper" data-v-84f53bce><div class="container" data-v-84f53bce><div class="title" data-v-84f53bce><div class="VPNavBarTitle has-sidebar" data-v-84f53bce data-v-1f5f0f08><a class="title" href="/hyper-bot/" data-v-1f5f0f08><!--[--><!--]--><!----><span data-v-1f5f0f08>HypeR Bot 文档</span><!--[--><!--]--></a></div></div><div class="content" data-v-84f53bce><div class="content-body" data-v-84f53bce><!--[--><!--]--><div class="VPNavBarSearch search" data-v-84f53bce><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-84f53bce data-v-5b431987><span id="main-nav-aria-label" class="visually-hidden" data-v-5b431987> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/hyper-bot/" tabindex="0" data-v-5b431987 data-v-c34ad3ac><!--[--><span data-v-c34ad3ac>主页</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://github.com/HarcicYang/HypeR_Bot" target="_blank" rel="noreferrer" tabindex="0" data-v-5b431987 data-v-c34ad3ac><!--[--><span data-v-c34ad3ac>Github</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-84f53bce data-v-4f96125a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-4f96125a data-v-b1c0bec1 data-v-597f875b><span class="check" data-v-597f875b><span class="icon" data-v-597f875b><!--[--><span class="vpi-sun sun" data-v-b1c0bec1></span><span class="vpi-moon moon" data-v-b1c0bec1></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-84f53bce data-v-f16a28a1 data-v-339bbf77><!--[--><a class="VPSocialLink no-icon" href="https://github.com/HarcicYang/HypeR_Bot" aria-label="github" target="_blank" rel="noopener" data-v-339bbf77 data-v-abce041d><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-84f53bce data-v-b1040e8a data-v-6f64e347><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6f64e347><span class="vpi-more-horizontal icon" data-v-6f64e347></span></button><div class="menu" data-v-6f64e347><div class="VPMenu" data-v-6f64e347 data-v-a24e7737><!----><!--[--><!--[--><!----><div class="group" data-v-b1040e8a><div class="item appearance" data-v-b1040e8a><p class="label" data-v-b1040e8a>Appearance</p><div class="appearance-action" data-v-b1040e8a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-b1040e8a data-v-b1c0bec1 data-v-597f875b><span class="check" data-v-597f875b><span class="icon" data-v-597f875b><!--[--><span class="vpi-sun sun" data-v-b1c0bec1></span><span class="vpi-moon moon" data-v-b1c0bec1></span><!--]--></span></span></button></div></div></div><div class="group" data-v-b1040e8a><div class="item social-links" data-v-b1040e8a><div class="VPSocialLinks social-links-list" data-v-b1040e8a data-v-339bbf77><!--[--><a class="VPSocialLink no-icon" href="https://github.com/HarcicYang/HypeR_Bot" aria-label="github" target="_blank" rel="noopener" data-v-339bbf77 data-v-abce041d><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-84f53bce data-v-458d3adf><span class="container" data-v-458d3adf><span class="top" data-v-458d3adf></span><span class="middle" data-v-458d3adf></span><span class="bottom" data-v-458d3adf></span></span></button></div></div></div></div><div class="divider" data-v-84f53bce><div class="divider-line" data-v-84f53bce></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-43d028d2 data-v-3c6f540a><div class="container" data-v-3c6f540a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-3c6f540a><span class="vpi-align-left menu-icon" data-v-3c6f540a></span><span class="menu-text" data-v-3c6f540a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-3c6f540a data-v-a3163103><button data-v-a3163103>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-43d028d2 data-v-4912d908><div class="curtain" data-v-4912d908></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-4912d908><span class="visually-hidden" id="sidebar-aria-label" data-v-4912d908> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-fafb5e0f><section class="VPSidebarItem level-0" data-v-fafb5e0f data-v-993e26fd><!----><div class="items" data-v-993e26fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-993e26fd data-v-993e26fd><div class="item" data-v-993e26fd><div class="indicator" data-v-993e26fd></div><a class="VPLink link link" href="/hyper-bot/quick-start.html" data-v-993e26fd><!--[--><p class="text" data-v-993e26fd>快速开始</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-fafb5e0f><section class="VPSidebarItem level-0 is-link" data-v-fafb5e0f data-v-993e26fd><div class="item" tabindex="0" data-v-993e26fd><div class="indicator" data-v-993e26fd></div><a class="VPLink link link" href="/hyper-bot/usage.html" data-v-993e26fd><!--[--><h2 class="text" data-v-993e26fd>使用手册</h2><!--]--></a><!----></div><div class="items" data-v-993e26fd><!--[--><section class="VPSidebarItem level-1 is-link" data-v-993e26fd data-v-993e26fd><div class="item" tabindex="0" data-v-993e26fd><div class="indicator" data-v-993e26fd></div><a class="VPLink link link" href="/hyper-bot/usage/qq_usage.html" data-v-993e26fd><!--[--><h3 class="text" data-v-993e26fd>于 QQ 客户段进行的操作和使用</h3><!--]--></a><!----></div><div class="items" data-v-993e26fd><!--[--><div class="VPSidebarItem level-2 is-link" data-v-993e26fd data-v-993e26fd><div class="item" data-v-993e26fd><div class="indicator" data-v-993e26fd></div><a class="VPLink link link" href="/hyper-bot/usage/qq_usage/ess.html" data-v-993e26fd><!--[--><p class="text" data-v-993e26fd>Ess - 设置精华消息</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-2 is-link" data-v-993e26fd data-v-993e26fd><div class="item" tabindex="0" data-v-993e26fd><div class="indicator" data-v-993e26fd></div><a class="VPLink link link" href="/hyper-bot/usage/qq_usage/memes.html" data-v-993e26fd><!--[--><h4 class="text" data-v-993e26fd>Memes - 制作表情包</h4><!--]--></a><!----></div><div class="items" data-v-993e26fd><!--[--><div class="VPSidebarItem level-3 is-link" data-v-993e26fd data-v-993e26fd><div class="item" data-v-993e26fd><div class="indicator" data-v-993e26fd></div><a class="VPLink link link" href="/hyper-bot/usage/qq_usage/memes_g/list.html" data-v-993e26fd><!--[--><p class="text" data-v-993e26fd>表情列表</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-2 is-link" data-v-993e26fd data-v-993e26fd><div class="item" data-v-993e26fd><div class="indicator" data-v-993e26fd></div><a class="VPLink link link" href="/hyper-bot/usage/qq_usage/quoter.html" data-v-993e26fd><!--[--><p class="text" data-v-993e26fd>Quoter - 生成对名言之伟大引用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-993e26fd data-v-993e26fd><div class="item" data-v-993e26fd><div class="indicator" data-v-993e26fd></div><a class="VPLink link link" href="/hyper-bot/usage/qq_usage/user_title.html" data-v-993e26fd><!--[--><p class="text" data-v-993e26fd>UserTitle - 设置自定义头衔</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-993e26fd data-v-993e26fd><div class="item" data-v-993e26fd><div class="indicator" data-v-993e26fd></div><a class="VPLink link link" href="/hyper-bot/usage/qq_usage/ncm.html" data-v-993e26fd><!--[--><p class="text" data-v-993e26fd>Netease Music - 自助点歌（网易云）</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-993e26fd data-v-993e26fd><div class="item" data-v-993e26fd><div class="indicator" data-v-993e26fd></div><a class="VPLink link link" href="/hyper-bot/usage/config.html" data-v-993e26fd><!--[--><p class="text" data-v-993e26fd>HypeR Bot 的简单配置</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-fafb5e0f><section class="VPSidebarItem level-0 has-active" data-v-fafb5e0f data-v-993e26fd><div class="item" role="button" tabindex="0" data-v-993e26fd><div class="indicator" data-v-993e26fd></div><h2 class="text" data-v-993e26fd>进阶</h2><!----></div><div class="items" data-v-993e26fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-993e26fd data-v-993e26fd><div class="item" data-v-993e26fd><div class="indicator" data-v-993e26fd></div><a class="VPLink link link" href="/hyper-bot/more/classes.html" data-v-993e26fd><!--[--><p class="text" data-v-993e26fd>内置类、方法和属性</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 has-active" data-v-993e26fd data-v-993e26fd><div class="item" role="button" tabindex="0" data-v-993e26fd><div class="indicator" data-v-993e26fd></div><h3 class="text" data-v-993e26fd>直接开发</h3><!----></div><div class="items" data-v-993e26fd><!--[--><div class="VPSidebarItem level-2 is-link" data-v-993e26fd data-v-993e26fd><div class="item" data-v-993e26fd><div class="indicator" data-v-993e26fd></div><a class="VPLink link link" href="/hyper-bot/usage/dev/new_module.html" data-v-993e26fd><!--[--><p class="text" data-v-993e26fd>添加模块</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-993e26fd data-v-993e26fd><div class="item" data-v-993e26fd><div class="indicator" data-v-993e26fd></div><a class="VPLink link link" href="/hyper-bot/usage/dev/as_py_module.html" data-v-993e26fd><!--[--><p class="text" data-v-993e26fd>作为 Python 包开发</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-43d028d2 data-v-a30a4805><div class="VPDoc has-sidebar has-aside" data-v-a30a4805 data-v-4c7c60e3><!--[--><!--]--><div class="container" data-v-4c7c60e3><div class="aside" data-v-4c7c60e3><div class="aside-curtain" data-v-4c7c60e3></div><div class="aside-container" data-v-4c7c60e3><div class="aside-content" data-v-4c7c60e3><div class="VPDocAside" data-v-4c7c60e3 data-v-cab9323b><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cab9323b data-v-3f5c7e4e><div class="content" data-v-3f5c7e4e><div class="outline-marker" data-v-3f5c7e4e></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-3f5c7e4e>On this page</div><ul class="VPDocOutlineItem root" data-v-3f5c7e4e data-v-5b8690f4><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cab9323b></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-4c7c60e3><div class="content-container" data-v-4c7c60e3><!--[--><!--]--><main class="main" data-v-4c7c60e3><div style="position:relative;" class="vp-doc _hyper-bot_usage_dev_new_module" data-v-4c7c60e3><div><h1 id="添加和注册新-module" tabindex="-1">添加和注册新 <code>Module</code> <a class="header-anchor" href="#添加和注册新-module" aria-label="Permalink to &quot;添加和注册新 `Module`&quot;">​</a></h1><blockquote><p><code>Module</code> 指 HypeR Bot 中的消息处理模块</p></blockquote><p>在阅读本章前，建议先阅读 <a href="/hyper-bot/more/classes.html">HypeR Bot 的内置类、方法和属性</a>。</p><h2 id="快速开始" tabindex="-1">快速开始 <a class="header-anchor" href="#快速开始" aria-label="Permalink to &quot;快速开始&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hyperot </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> common, segments</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ModuleClass</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hyperot.events </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@ModuleClass.ModuleRegister.register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(GroupMessageEvent, PrivateMessageEvent)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyPing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ModuleClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.event.message) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ping&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> common.Message(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                segments.Reply(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.event.message_id),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                segments.Text(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Pong!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.actions.send(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">                group_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.event.group_id,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">                user_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.event.user_id,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">                message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            )</span></span></code></pre></div><p>把以上代码储存在一个<code>.py</code>文件中，扔进<code>module</code>文件夹，启动 HypeR Bot，并在QQ中对 HypeR Bot 发送 <code>ping</code>，HypeR Bot 将回复 <code>Pong!</code>。</p><p>让我们来看看以上代码到底做了什么。</p><ul><li>头两行，导入需要的模块；</li><li><code>@ModuleClass.ModuleRegister.register(GroupMessageEvent, PrivateMessageEvent)</code>：这一行将其下装饰的<code>MyPing</code> 类注册为消息处理模块，接受 <code>GroupMessageEvent</code> 事件和 <code>PrivateMessageEvent</code> 事件，即群聊消息和私聊消息；</li><li><code>class MyPing(ModuleClass.Module)</code>：继承<a href="/hyper-bot/more/classes.html#module-类"><code>Module</code> 类</a>，创建<code>MyPing</code>类，作为消息处理模块；</li><li><code>async def handle(self)</code>：重写父类方法<code>handle</code>，<strong>这是任何消息处理模块的入口函数</strong>；</li><li>下方为业务代码： <ul><li>判断消息的内容是否为文字 <code>ping</code>；</li><li>如果是，创建<code>msg</code>对象，其类型为<a href="/hyper-bot/more/classes.html#message-类"><code>common.Message</code></a>，在消息中添加<code>Reply</code> 段用于添加对原消息的引用，而<code>Text</code>段为文本内容；</li><li>下一步，调用 API，发送消息。</li></ul></li></ul><p>是不是非常简单？</p><p>但是这个消息处理模块在<code>.help</code>命令的回复中没有出现，这是为什么？</p><h2 id="定义模块信息" tabindex="-1">定义模块信息 <a class="header-anchor" href="#定义模块信息" aria-label="Permalink to &quot;定义模块信息&quot;">​</a></h2><p>这个消息处理模块没有任何的信息，为什么要显示在<code>.help</code>命令的回复中呢？</p><p>现在，我们来为他添加信息。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hyperot </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> common, segments</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ModuleClass</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hyperot.events </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@ModuleClass.ModuleRegister.register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(GroupMessageEvent, PrivateMessageEvent)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyPing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ModuleClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    @</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">staticmethod</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() -&gt; ModuleClass.ModuleInfo:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ModuleClass.ModuleInfo(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            is_hidden</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            module_name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MyFirstModule&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            author</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Xiao_su_su_is_really_good&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            version</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0.114514&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            desc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ping, Pong!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            helps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;你说ping，我说Pong!&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self): </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span></code></pre></div><p>现在重启 HypeR Bot，看看效果吧~</p><p>现在 <code>MyFirstModule</code> 已经出现在了帮助列表中。同样，让我们来看看各个值代表什么：</p><ul><li><code>is_hidden</code>：标记该消息处理模块是否是一个隐藏模块，如果是，则该模块会被帮助列表忽略，默认为<code>True</code>；</li><li><code>module_name</code>：模块名；</li><li><code>author</code>：该模块的编写者；</li><li><code>version</code>：版本；</li><li><code>desc</code>：对该模块的简单描述；</li><li><code>helps</code>：相对详细的帮助信息。</li></ul><p>好了，基本的操作你已经掌握了，阅读<a href="https://11.onebot.dev" target="_blank" rel="noreferrer">OneBot v11 文档</a>进行进一步的开发吧~</p><h2 id="进阶用法" tabindex="-1">进阶用法 <a class="header-anchor" href="#进阶用法" aria-label="Permalink to &quot;进阶用法&quot;">​</a></h2><h3 id="自定义api" tabindex="-1">自定义API <a class="header-anchor" href="#自定义api" aria-label="Permalink to &quot;自定义API&quot;">​</a></h3><p>当您想要调用的API没有被 HypeR Bot 内置，您可以使用如下操作以调用一个自定义的API：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">echo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.actions.custom.your_custom_api(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arg1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value1, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value2)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> common.Ret.fetch(echo)</span></span></code></pre></div><p><code>result</code>与调用其他api的返回值相同。若不需要返回值，则 <code>result = common.Ret.fetch(echo)</code>可以省略。</p><h3 id="自定义事件过滤器" tabindex="-1">自定义事件过滤器 <a class="header-anchor" href="#自定义事件过滤器" aria-label="Permalink to &quot;自定义事件过滤器&quot;">​</a></h3><p>事件过滤器用于判断一个事件是否应当传入一个模块， HypeR Bot 的每个消息处理模块都拥有<code>filter()</code>方法，在必要时，该方法允许被重写。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ModuleRegister.register(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyMoudle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    @</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">staticmethod</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event, allowed) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        elif</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-4c7c60e3 data-v-2b9c8ed0><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-2b9c8ed0><span class="visually-hidden" id="doc-footer-aria-label" data-v-2b9c8ed0>Pager</span><div class="pager" data-v-2b9c8ed0><a class="VPLink link pager-link prev" href="/hyper-bot/more/classes.html" data-v-2b9c8ed0><!--[--><span class="desc" data-v-2b9c8ed0>Previous page</span><span class="title" data-v-2b9c8ed0>内置类、方法和属性</span><!--]--></a></div><div class="pager" data-v-2b9c8ed0><a class="VPLink link pager-link next" href="/hyper-bot/usage/dev/as_py_module.html" data-v-2b9c8ed0><!--[--><span class="desc" data-v-2b9c8ed0>Next page</span><span class="title" data-v-2b9c8ed0>作为 Python 包开发</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"D2rTFfMt\",\"more_classes.md\":\"kPlW6fs5\",\"more_index.md\":\"zpmBdSvR\",\"quick-start.md\":\"BYZAaRHA\",\"usage_config.md\":\"CDGOURoo\",\"usage_dev_as_py_module.md\":\"CqehYsum\",\"usage_dev_new_module.md\":\"BKT3w8F-\",\"usage_index.md\":\"DQe426PJ\",\"usage_qq_usage_ess.md\":\"VopTtl2F\",\"usage_qq_usage_index.md\":\"Bq324ErU\",\"usage_qq_usage_memes.md\":\"D_JVQvix\",\"usage_qq_usage_memes_g_list.md\":\"B5Ez5VjL\",\"usage_qq_usage_ncm.md\":\"CgcU63Y-\",\"usage_qq_usage_quoter.md\":\"BjIpd_07\",\"usage_qq_usage_user_title.md\":\"h_sjDeWM\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"HypeR Bot 文档\",\"description\":\"适配OneBot v11协议、功能模块化、易于扩展、高效的QQ机器人及框架\",\"base\":\"/hyper-bot/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"主页\",\"link\":\"/\"},{\"text\":\"Github\",\"link\":\"https://github.com/HarcicYang/HypeR_Bot\"}],\"sidebar\":[{\"text\":\"快速开始\",\"link\":\"/quick-start\"},{\"text\":\"使用手册\",\"link\":\"/usage\",\"items\":[{\"text\":\"于 QQ 客户段进行的操作和使用\",\"link\":\"/usage/qq_usage\",\"items\":[{\"text\":\"Ess - 设置精华消息\",\"link\":\"/usage/qq_usage/ess\"},{\"text\":\"Memes - 制作表情包\",\"link\":\"/usage/qq_usage/memes\",\"items\":[{\"text\":\"表情列表\",\"link\":\"/usage/qq_usage/memes_g/list\"}]},{\"text\":\"Quoter - 生成对名言之伟大引用\",\"link\":\"/usage/qq_usage/quoter\"},{\"text\":\"UserTitle - 设置自定义头衔\",\"link\":\"/usage/qq_usage/user_title\"},{\"text\":\"Netease Music - 自助点歌（网易云）\",\"link\":\"/usage/qq_usage/ncm\"}]},{\"text\":\"HypeR Bot 的简单配置\",\"link\":\"/usage/config\"}]},{\"text\":\"进阶\",\"items\":[{\"text\":\"内置类、方法和属性\",\"link\":\"/more/classes\"},{\"text\":\"直接开发\",\"items\":[{\"text\":\"添加模块\",\"link\":\"/usage/dev/new_module\"}]},{\"text\":\"作为 Python 包开发\",\"link\":\"/usage/dev/as_py_module\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/HarcicYang/HypeR_Bot\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>